<link rel="stylesheet" href="app/topology/cluster/style.css" />
<h1>cluster</h1>
<json-formatter json="ctrl.data"></json-formatter>
<json-formatter json="ctrl.ClusterData"></json-formatter>
<div layout="row" layout-margin flex="100" layout-align="center center">
    <h3>Time Frame</h3>
    <md-input-container>
        <md-select ng-model='ctrl.selectedTime' placeholder="5 Minutes Ago" id="time-picker">
            <md-option selected><small>5 Minutes</small></md-option>
            <md-option ><small>30 Minutes</small></md-option>
            <md-option><small>1 Hour</small></md-option>
            <md-option><small>90 Minutes</small></md-option>
            <md-option><small>2 Hours</small></md-option>
        </md-select>
    </md-input-container>
</div>
<table class="table table-responsive table-stripped cluster-table" ng-cloak md-whiteframe="6">
    <thead>
        <th>Server Name</th>
        <th>Status</th>
        <th>Current Running Jobs</th>
        <th>Jobs Type</th>
        <th>CPU Load</th>
        <th>Disk Space</th>
    </thead>
    <tbody>
        <tr class="cluster-row" ng-repeat="(key, value) in ctrl.ClusterData">
            <td> {{key}} </td>
            <td ngclass="{'online': value.ClusterStatus.toLowerCase().includes('online'), 'offline': value.ClusterStatus.toLowerCase().includes('offline')}">
                {{value}}
            </td>
            <td ng-init="GraphArray = [server.CurrentRunningJobs.History.length]">
                <div id="chart">
                    <canvas id="line" class="chart chart-line" chart-data="server.CurrentRunningJobs.History" chart-labels="GraphArray" chart-series="['serie A']">
                    </canvas>
                </div>
            </td>
            <td>{{server.JobType}}</td>
            <td>
                <div id="chart">
                    <canvas id="line" class="chart chart-line" chart-data="server.CurrentRunningJobs.History" chart-labels="GraphArray" chart-series="['serie A']">
                    </canvas>
                </div>
            </td>
            <td>{{server.DiskSpace}} GB</td>
        </tr>
    </tbody>
</table>